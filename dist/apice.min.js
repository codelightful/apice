var Apice=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var r=o(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,g(e,t,"get"))}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,g(e,t,"set"),n),n}function g(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function y(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var m={isPromise:function(e){return e instanceof Promise},trim:function(e){return e?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):""}},w=/\{(\d+)\}/g;m.placeholders=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r={output:e,unbind:n};if("string"!=typeof e||!n||0===n.length)return r;var o,a={},s=e.matchAll(w),c=d(s);try{for(c.s();!(o=c.n()).done;){var l=o.value,u=l[1];if(u&&!a[u]){a[u]=!0;var h=new RegExp("\\{"+u+"\\}","g"),f=n[u];void 0!==f&&(r.unbind[u]=null,r.output=r.output.replace(h,f))}}}catch(e){c.e(e)}finally{c.f()}return r.unbind=r.unbind.filter((function(e){return null!=e})),r};var b={set:function(e,t,n){if(e){"number"!=typeof n&&(console.warn("Invalid timespan has been provided. Setting the default value"),n=3600);var i=new Date;i.setTime(i.getTime()+1e3*n);var r=m.trim(e)+"="+t+"; expires="+i.toGMTString()+"; path=/";document.cookie=r}else console.warn("Unable to set a cookie without name")},get:function(e){if(!e)return null;for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=m.trim(t[n]);if(i){var r=i.split("=");if(m.trim(r[0])===e)return r[1]}}return null}},k={},E={loggers:{},levels:{fatal:{value:10,color:"#ff4444",label:"FATAL"},error:{value:20,color:"#ff4444",label:"ERROR"},warn:{value:30,color:"#ff8800",label:"WARN"},info:{value:40,color:"#0099cc",label:"INFO"},debug:{value:50,color:"#3E4551",label:"DEBUG"},trace:{value:60,color:"#3E4551",label:"TRACE"}}},M=b.get("apice.logger.level");M?(E.globalLevel=E.levels[M],E.globalLevel||(E.globalLevel=E.levels.warn)):E.globalLevel=E.levels.warn;var W=new WeakMap,_=new WeakMap,T=new WeakSet,S=function(){function e(n){t(this,e),T.add(this),W.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),p(this,W,n);var i=b.get("apice.logger.["+n+"].level");i?(p(this,_,E.levels[i]),v(this,_)||p(this,_,E.globalLevel)):p(this,_,E.globalLevel)}return i(e,[{key:"name",get:function(){return v(this,W)}},{key:"level",value:function(){if(0!==arguments.length){var e=E.levels[arguments[0]];if(!e)throw new Error("apice.logger.invalid_level["+arguments[0]+"]");p(this,_,e),b.set("apice.logger.["+v(this,W)+"].level",arguments[0],1800)}return v(this,_).label}},{key:"fatal",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=y(this,T,A)).call.apply(t,[this,E.levels.fatal,e].concat(i))}},{key:"error",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=y(this,T,A)).call.apply(t,[this,E.levels.error,e].concat(i))}},{key:"warn",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=y(this,T,A)).call.apply(t,[this,E.levels.warn,e].concat(i))}},{key:"info",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=y(this,T,A)).call.apply(t,[this,E.levels.info,e].concat(i))}},{key:"debug",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=y(this,T,A)).call.apply(t,[this,E.levels.debug,e].concat(i))}},{key:"trace",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=y(this,T,A)).call.apply(t,[this,E.levels.trace,e].concat(i))}}]),e}();function A(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(v(this,_).value>=e.value){var o;if("string"!=typeof t)t=JSON.stringify(t);else if(i&&i.length>0){var a=m.placeholders.apply(m,[t].concat(u(i)));t=a.output,i=a.unbind}(o=console).log.apply(o,["%c["+e.label+"]["+v(this,W)+"]: "+t].concat(["color: "+e.color].concat(u(i))))}}function L(e,t,n){if(!e)throw new Error("apice.util.event.add.invalid_target");if(!t||"string"!=typeof t)throw new Error("apice.util.event.add.invalid_event_name");"function"==typeof n&&("function"==typeof e.each?e.each((function(e){L(e,t,n)})):"function"==typeof e.addEventListener?e.addEventListener(t,n,!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n))}function C(e,t,n){if(!e)throw new Error("apice.util.event.remove.invalid_target");if(!t||"string"!=typeof t)throw new Error("apice.util.event.remove.invalid_event_name");"function"==typeof n&&("function"==typeof e.each?e.each((function(e){C(e,t,n)})):"function"==typeof e.removeEventListener?e.removeEventListener(t,n):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n))}k.getLogger=function(e){return e||(e="system"),E.loggers[e]||(E.loggers[e]=new S(e)),E.loggers[e]},k.level=function(){var e;if(1===arguments.length){var t=E.levels[arguments[0]];if(!t)throw new Error("apice.logger.invalid_level["+arguments[0]+"]");for(var n in E.globalLevel=t,b.set("apice.logger.level",arguments[0],1800),E.loggers){var i=E.loggers[n];i.level(arguments[0])}}else if(2===arguments.length){var r=k.getLogger(arguments[1]);return r.level(arguments[0]),r.level()}return null===(e=E.globalLevel)||void 0===e?void 0:e.label};var x={addListener:L,removeListener:C,documentReady:function(e){"complete"===document.readyState?e():"function"==typeof document.addEventListener?document.addEventListener("DOMContentLoaded",e,!1):"function"==typeof document.attachEvent&&document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&e()}))},waitAnimation:function(e,t,n){L(e,"animationend",(function t(){C(e,"animationend",t),n()})),"function"==typeof e.setClass?e.setClass(t):e.className=t}},P={};function N(e){if(!e||"string"!=typeof e)return null;var t=document.createElement("div");return t.innerHTML=e,u(t.childNodes)}var R=function e(){t(this,e)},j=new WeakMap,O=function(e){r(o,e);var n=l(o);function o(e){var i;return t(this,o),i=n.call(this),j.set(s(i),{writable:!0,value:void 0}),p(s(i),j,e),i}return i(o,[{key:"isValid",get:function(){return!!v(this,j)}},{key:"id",get:function(){return v(this,j)?v(this,j).id:null}},{key:"each",value:function(e){return"function"==typeof e&&v(this,j)&&e(v(this,j)),this}},{key:"content",value:function(){var e=this;if(0===arguments.length)return v(this,j)?v(this,j).innerHTML:null;if(v(this,j)){var t=arguments[0];t?F(t)?(v(this,j).innerHTML="",v(this,j).appendChild(t)):t instanceof R?(v(this,j).innerHTML="",t.each((function(t){v(e,j).append(t)}))):v(this,j).innerHTML=t:v(this,j).innerHTML=""}return this}},{key:"append",value:function(){var e=this;if(v(this,j)&&arguments.length>0)if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.append(arguments[t]);else{var n=arguments[0];if(n instanceof R)n.each((function(t){v(e,j).appendChild(t)}));else if("string"==typeof n){n=N(n);for(var i=0;i<n.length;i++)v(this,j).appendChild(n[i])}else if(F(n))v(this,j).appendChild(n);else if(n instanceof NodeList)for(var r=0;r<n.length;r++){var o=n[r];v(this,j).appendChild(o)}}return this}},{key:"prepend",value:function(){var e=this;if(v(this,j)&&arguments.length>0)if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.prepend(arguments[t]);else{var n=v(this,j).firstChild,i=arguments[0];if(i instanceof R)i.each((function(t){v(e,j).insertBefore(t,n)}));else if("string"==typeof i){i=N(i);for(var r=0;r<i.length;r++)v(this,j).insertBefore(i[r],n)}else if(F(i))v(this,j).insertBefore(i,n);else if(i instanceof NodeList)for(var o=0;o<i.length;o++){var a=i[o];v(this,j).insertBefore(a,n)}}return this}},{key:"appendTo",value:function(e){(e=z(e))&&e.append(this)}},{key:"on",value:function(e,t){if(!e)throw new Error("apice.element.on.no_event_name");return v(this,j)&&"function"==typeof t&&x.addListener(v(this,j),e,t),this}},{key:"click",value:function(){return 0===arguments.length||"function"!=typeof arguments[0]||this.on("click",arguments[0]),this}},{key:"select",value:function(e){return e&&"string"==typeof e?U(v(this,j),e):null}},{key:"addClass",value:function(e){return e&&v(this,j).classList.add(e),this}},{key:"removeClass",value:function(e){return e&&v(this,j).classList.remove(e),this}},{key:"setClass",value:function(e){return e&&(v(this,j).className=e),this}}]),o}(R),q=new WeakMap,H=new WeakSet,I=function(e){r(o,e);var n=l(o);function o(){var e;return t(this,o),e=n.call(this),H.add(s(e)),q.set(s(e),{writable:!0,value:void 0}),p(s(e),q,[]),e}return i(o,[{key:"add",value:function(e){return e&&v(this,q).push(e),this}},{key:"each",value:function(){return y(this,H,B).call(this,"each",arguments),this}},{key:"content",value:function(){return 0===arguments.length?y(this,H,B).call(this,"content",arguments):(y(this,H,B).call(this,"content",arguments),this)}},{key:"append",value:function(){return y(this,H,B).call(this,"append",arguments),this}},{key:"prepend",value:function(){return y(this,H,B).call(this,"prepend",arguments),this}},{key:"appendTo",value:function(){return y(this,H,B).call(this,"appendTo",arguments),this}},{key:"on",value:function(){return y(this,H,B).call(this,"on",arguments),this}},{key:"click",value:function(){return y(this,H,B).call(this,"click",arguments),this}},{key:"select",value:function(){return y(this,H,B).call(this,"select",arguments),this}},{key:"addClass",value:function(){return y(this,H,B).call(this,"addClass",arguments),this}},{key:"removeClass",value:function(){return y(this,H,B).call(this,"removeClass",arguments),this}},{key:"setClass",value:function(){return y(this,H,B).call(this,"setClass",arguments),this}}]),o}(R);function B(e,t){for(var n=[],i=0;i<v(this,q).length;i++){var r=v(this,q)[i],o=r[e];if("function"==typeof o)try{var a=o.apply(r,t);Array.isArray(a)?n.push.apply(n,u(a)):n.push(a)}catch(t){console.log("itaca.element.node_call[".concat(e,"]"),t)}}return n}function F(t){return t&&"object"===e(t)&&1===t.nodeType}function U(e,t){var n=e.querySelectorAll(t);if(0===n.length)return null;if(1===n.length)return new O(n[0]);for(var i=new I,r=0;r<n.length;r++){var o=n[r];i.add(new O(o))}return i}var z=function(e){return e?"body"===e||e===document.body?(P.bodySingleton||(P.bodySingleton=new O(document.body)),P.bodySingleton):"string"==typeof e?U(document,e):e instanceof R?e:F(e)?new O(e):null:null};function D(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function X(){return D()+D()}z.append=function(e,t){if(e&&t){if("body"===t||t===document.body)throw Error("apice.element.append.source_cannot_be_body");if("string"==typeof t){var n=t.charAt(0);if("#"===n||"."===n||"["===n){var i=document.querySelector(t);if(!i)throw Error("apice.element.append.unknown_source[".concat(t,"]"));t=i}}var r=z(e);if(!r)throw Error("apice.element.append.unknown_target[".concat(e,"]"));r.append(t)}},z.isApiceElement=function(e){return e&&e instanceof R};var G={tinyId:D,shortId:X,guid:function(){return X()+"-"+X()+"-"+X()+"-"+X()+X()}},$={},J=new WeakMap,V=new WeakMap,K=new WeakMap,Q=new WeakMap,Y=new WeakMap,Z=new WeakSet,ee=function(){function e(n){t(this,e),Z.add(this),J.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:void 0}),p(this,Y,G.guid()),p(this,V,n.message),p(this,K,n.cause),p(this,J,n.module),p(this,Q,n.code)}return i(e,[{key:"guid",get:function(){return v(this,Y)}},{key:"message",get:function(){var e;return null!==(e=v(this,V))&&void 0!==e?e:"An error has occurred. Please contact the technical support without closing this screen."}},{key:"cause",get:function(){return v(this,K)}},{key:"code",get:function(){return v(this,Q)}},{key:"log",value:function(){var e=k.getLogger(v(this,J)),t="ref=[".concat(v(this,Y),"]");v(this,V)&&(t+="\n-> ".concat(v(this,V))),v(this,Q)&&(t+="\n-> (c) ".concat(v(this,Q))),v(this,K)&&(t+=y(this,Z,te).call(this,v(this,K))),e.error(t)}},{key:"render",value:function(e){this.log();var t=z(e);t?t.content('<div class="apc-badge apc-error">            <div class="apc-header">Atention!</div>            <div class="apc-body">'.concat(this.message,'</div>            <div class="apc-footer">').concat(v(this,Y),"</div>        </div>")):Apice.ui.toast.error("".concat(this.message,"<div>").concat(v(this,Y),"</div>"))}}]),e}();function te(e){return e?"string"==typeof e?"\n-> (s) ".concat(e):e instanceof Error?"\n-> (e) ".concat(e.stack):v(this,K)instanceof ee?"\n-> (n) ".concat(e.code)+y(this,Z,te).call(this,e.cause):v(this,K)instanceof ie?"\n-> (h) http-error[".concat(e.code,"]"):void 0:""}$.create=function(t){if(!t)return console.error("apice.error_handler.create.null_input"),null;var n=e(t);if("string"===n)t={code:t};else if(t instanceof Error)t={cause:t};else if("object"!==n)return console.error("apice.error_handler.create.invalid_input",t),null;return new ee(t)},$.render=function(e,t){e&&(e instanceof ee||(e=$.create(e)),e.render(t))};var ne=new WeakMap,ie=function(){function e(n){t(this,e),ne.set(this,{writable:!0,value:void 0}),p(this,ne,n)}return i(e,[{key:"type",get:function(){return"http"}},{key:"code",get:function(){return v(this,ne)}}]),e}();$.createHttpError=function(e){return new ie(e)},window.addEventListener("unhandledrejection",(function(e){e.reason instanceof ee&&(e.preventDefault(),e.reason.render())}));var re={};function oe(e,t){var n=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw Error("apice.http.xmlhttp_creation_error")}}}();return n.onreadystatechange=function(){4!=n.readyState&&"complete"!==n.readyState||(200==n.status?e(n.responseText):t($.createHttpError(n.status)))},n}re.request=function(e,t){return"string"==typeof e&&e?(t||(t={}),t.method||(t.method="GET"),new Promise((function(n,i){var r=oe(n,i);r.open(t.method,e,!1!==t.async),"GET"!==t.method&&t.data?r.send(t.data):r.send()}))):Promise.reject("apice.http.null_url")},re.loadScript=function(e){return new Promise((function(t,n){var i=document.createElement("script");i.src=e,i.type="text/javascript",i.async=!1,i.onerror=function(){n($.create({module:"apice.http",code:"apice.http.load_script_error[".concat(e,"]")}))},i.onload=function(){t()},document.head.appendChild(i)}))};var ae=new WeakMap,se=new WeakMap,ce=new WeakMap,le=new WeakMap,ue=function(){function e(n,i,r,o){if(t(this,e),ae.set(this,{writable:!0,value:void 0}),se.set(this,{writable:!0,value:void 0}),ce.set(this,{writable:!0,value:void 0}),le.set(this,{writable:!0,value:void 0}),!v(this,se))throw new Error("apice.http.url.no_host");p(this,ae,null!=n?n:"https"),p(this,se,i),p(this,ce,null!=r?r:"80"),p(this,le,null!=o?o:"")}return i(e,[{key:"protocol",get:function(){return v(this,ae)}},{key:"host",get:function(){return v(this,se)}},{key:"port",get:function(){return v(this,ce)}},{key:"path",get:function(){return v(this,le)}},{key:"toString",value:function(){return v(this,ae)+"://"+v(this,se)+":"+v(this,ce)+"/"+v(this,le)}},{key:"resourceUrl",value:function(e,t,n){var i=this.toString();return e&&"string"==typeof e&&(i.endsWith("/")||e.startsWith("/")||(i+="/"),i+=e),t&&"string"==typeof t&&(t.startsWith("?")||(i+="?"),i+=t),n&&"string"==typeof n&&(n.startsWith("#")||(i+="#"),i+=n),i}},{key:"get",value:function(e,t,n){var i=this.resourceUrl(e,t,n);return re.request(i,{method:"GET"})}},{key:"post",value:function(e,t){var n=this.resourceUrl(e);return re.request(n,{method:"POST",data:t})}},{key:"put",value:function(e,t){var n=this.resourceUrl(e);return re.request(n,{method:"PUT",data:t})}},{key:"delete",value:function(e,t){var n=this.resourceUrl(e);return re.request(n,{method:"DELETE",data:t})}}]),e}(),he=new WeakMap,fe=new WeakMap,de=new WeakMap,ve=new WeakMap,pe=function(){function n(){t(this,n),he.set(this,{writable:!0,value:void 0}),fe.set(this,{writable:!0,value:void 0}),de.set(this,{writable:!0,value:void 0}),ve.set(this,{writable:!0,value:void 0})}return i(n,[{key:"protocol",value:function(e){return p(this,he,e),this}},{key:"host",value:function(e){return p(this,fe,e),this}},{key:"port",value:function(t){var n=e(t);if("string"===n)p(this,de,t);else{if("number"!==n)throw new Error("apice.http.url_builder.invalid_port");p(this,de,String(t))}return this}},{key:"path",value:function(e){return p(this,ve,e),this}},{key:"build",value:function(){return new ue(v(this,he),v(this,fe),v(this,de),v(this,ve))}}]),n}();re.url=function(){return new pe};var ge="apc.controller",ye=k.getLogger(ge),me={controllers:{}},we=function(e){if("string"==typeof e){var t=me.controllers[e];if(!t)throw Error("apice.controller.unknown_controller[".concat(e,"]"));return t}},be=new WeakMap,ke=new WeakMap,Ee=new WeakSet,Me=new WeakSet,We=function(){function n(e,i){t(this,n),Me.add(this),Ee.add(this),be.set(this,{writable:!0,value:void 0}),ke.set(this,{writable:!0,value:void 0}),p(this,be,e),p(this,ke,i)}return i(n,[{key:"name",get:function(){return v(this,be)}},{key:"declare",value:function(e){if("function"!=typeof e)throw new Error("apice.controller.declare.invalid_implementation[".concat(v(this,be),"]"));p(this,ke,e)}},{key:"serve",value:function(){var t=e(v(this,ke));return"function"===t?y(this,Ee,_e).call(this):"string"===t?y(this,Me,Te).call(this):Promise.reject($.create({module:ge,code:"apice.controller.bad_implementation[".concat(v(this,be),"]")}))}}]),n}();function _e(){var e=this;return ye.debug("Serving controller. controller={0}",v(this,be)),new Promise((function(t,n){try{v(e,ke).call(e),t()}catch(t){n($.create({module:ge,cause:t,code:"apice.controller.serve.implementation_error[".concat(v(e,be),"]")}))}}))}function Te(){var e=this;return ye.debug("Loading controller. controller={0}",v(this,be)),new Promise((function(t,n){re.loadScript(v(e,ke)).then((function(){setTimeout((function(){"string"==typeof v(e,ke)?n("apice.controller.serve.undeclared[".concat(v(e,be),"]")):y(e,Ee,_e).call(e).then(t).catch(n)}),0)})).catch((function(t){n($.create({module:ge,cause:t,code:"apice.controller.load_script_error[".concat(v(e,be),"]")}))}))}))}we.register=function(e,t){ye.debug("Registering controller. controller={0)",e);var n=new We(e,t);return me.controllers[e]=n,n},we.declare=function(e,t){ye.debug("Declaring controller. controller={0}",e);var n=me.controllers[e];if(!n)throw Error("apice.controller.declare.unknown_controller[".concat(e,"]"));n.declare(t)},we.isController=function(e){return e&&e instanceof We};var Se="apice.fragment",Ae=k.getLogger(Se),Le={fragments:{}},Ce=new WeakMap,xe=new WeakMap,Pe=new WeakMap,Ne=new WeakSet,Re=function(){function e(n,i,r){t(this,e),Ne.add(this),Ce.set(this,{writable:!0,value:void 0}),xe.set(this,{writable:!0,value:void 0}),Pe.set(this,{writable:!0,value:void 0}),p(this,Ce,n),p(this,xe,i),p(this,Pe,r)}return i(e,[{key:"name",get:function(){return v(this,Ce)}},{key:"render",value:function(e){var t=this;e||(e=document.body);var n=z(e);return n?(Ae.debug("Serving fragment. fragment={0}",v(this,Ce)),new Promise((function(e,i){re.request(v(t,xe),{method:"GET"}).then((function(r){n.content(r),y(t,Ne,je).call(t).then(e).catch(i)})).catch((function(e){i($.create({module:Se,message:"An error has occurred trying to load the content",cause:e,code:"apice.fragment.render_error[".concat(t.name,"]")}))}))}))):Promise.reject($.create({module:Se,code:"apice.fragment.render.target_not_found[".concat(e,"]")}))}}]),e}();function je(){var t=this;return v(this,Pe)?new Promise((function(n,i){var r=e(v(t,Pe));if("function"===r){Ae.debug("Serving fragment controller function. fragment={0}",v(t,Ce));try{v(t,Pe).call(t),n()}catch(e){i($.create({module:Se,cause:e,code:"apice.fragment.controller_function_error[".concat(v(t,Ce),"]")}))}}else"string"===r&&(Ae.debug("Serving fragment controller. fragment={0} controller={1}",v(t,Ce),v(t,Pe)),we(v(t,Pe)).serve().then(n).catch((function(e){i($.create({module:Se,cause:e,code:"apice.fragment.controller_serve_error[".concat(t.name,"]")}))})))})):Promise.resolve()}var Oe=function(e){if("string"==typeof e){var t=Le.fragments[e];if(!t)throw new Error("apice.fragment.unknown_fragment[".concat(e,"]"));return t}};Oe.register=function(e,t,n){Ae.debug("Registering fragment. fragment={0}",e);var i=new Re(e,t,n);return Le.fragments[e]=i,i},Oe.isFragment=function(e){return e&&e instanceof Re};var qe="apice.router",He=k.getLogger(qe),Ie={},Be={};function Fe(e){He.debug("Hash change triggered. event={0}",e);var t=Ie.hash(),n=Ie.match(t);if(n)He.debug("Serving route. pattern={0}",n.pattern);else if(!Be.defaultRoute||t&&Be.notFoundRoute){if(!Be.notFoundRoute)return void $.render({module:qe,message:"The requested resource was not found: "+t,code:"apice.router.no_matching_no_default"});He.warn("Route not found. Using no-found default routing. hash={0}",t),n=Be.notFoundRoute}else t?He.warn("Route not found. Serving default hash={0}",t):He.debug("No hash found. Serving default router"),n=Be.defaultRoute;n.serve(t)}Be.routes=[],Be.defaultRoute=null,Be.notFoundRoute=null,Be.target=null;var Ue=new WeakMap,ze=new WeakMap,De=new WeakMap,Xe=new WeakSet,Ge=function(){function e(n){if(t(this,e),Xe.add(this),Ue.set(this,{writable:!0,value:void 0}),ze.set(this,{writable:!0,value:void 0}),De.set(this,{writable:!0,value:void 0}),!n||"string"!=typeof n)throw Error("apice.router.hah.invalid_pattern");p(this,Ue,n),y(this,Xe,$e).call(this)}return i(e,[{key:"pattern",get:function(){return v(this,Ue)}},{key:"count",get:function(){return v(this,ze).length}},{key:"hasParameters",get:function(){return v(this,De).length>0}}]),e}();function $e(){p(this,ze,[]),p(this,De,[]);for(var e=v(this,Ue).split("/"),t=0;t<e.length;t++){var n=e[t];n.startsWith(":")&&v(this,De).push(n.substr(1)),v(this,ze).push(n)}}var Je=new WeakMap,Ve=new WeakMap,Ke=function(){function e(n,i){if(t(this,e),Je.set(this,{writable:!0,value:void 0}),Ve.set(this,{writable:!0,value:void 0}),!n||"string"!=typeof n)throw Error("apice.route.constructor.invalid_route_value");if(!i)throw Error("apice.route.constructor.missing_route_action");p(this,Je,new Ge(n)),p(this,Ve,i)}return i(e,[{key:"pattern",get:function(){return v(this,Je).pattern}},{key:"asDefault",value:function(){Be.defaultRoute=this}},{key:"asNotFound",value:function(){Be.notFoundRoute=this}},{key:"match",value:function(e){return!v(this,Je).hasParameters&&e===v(this,Je).pattern}},{key:"serve",value:function(e){try{if("function"==typeof v(this,Ve))He.trace("Serving routing from function. pattern={0}",this.pattern),v(this,Ve).call(this,e);else if("string"==typeof v(this,Ve))He.trace("Serving routing from fragment ID. pattern={0} fragment={1}",this.pattern,v(this,Ve)),Oe(v(this,Ve)).render(Be.target);else if(Oe.isFragment(v(this,Ve)))He.trace("Serving routing from fragment instance. pattern={0}",this.pattern),v(this,Ve).render(Be.target);else{if("function"!=typeof v(this,Ve).serve)throw Error("apice.router.invalid_action[".concat(this.pattern,"]"));He.trace("Serving routing from serviced instance. pattern={0}",this.pattern),v(this,Ve).serve()}}catch(e){$.render({module:qe,message:"An error has occurred trying to serve the resource. Please contact technical support without closing this screen",code:"apice.router.serve_error[".concat(this.pattern,"]"),cause:e},Be.target)}}}]),e}();Ie.register=function(e,t){He.debug("Registering route. pattern="+e);var n=new Ke(e,t);return Be.routes.push(n),n},Ie.match=function(e){if(!e||"string"!=typeof e)return null;for(var t=0;t<Be.routes.length;t++){var n=Be.routes[t];if(!0===n.match(e))return n}return null},Ie.hash=function(){var e=window.location.hash;return e.startsWith("#")&&(e=e.substr(1)),e},Ie.start=function(){return He.debug("Starting Apice router"),x.addListener(window,"hashchange",(function(){Fe("hashchange")})),x.documentReady((function(){Fe("routerstart")})),Ie},Ie.target=function(){if(0===arguments.length)return Be.target;var e=arguments[0];if(e?(Be.target=z(e),Be.target||He.error("apice.router.target_notfound[".concat(e,"]"))):Be.target=null,!Be.target){He.info("Using default routing target container");var t=document.getElementById("apc-router-container");t||((t=document.createElement("div")).id="apc-router-container",document.body.appendChild(t)),Be.target=z(t)}return Ie};var Qe={},Ye={},Ze=k.getLogger("apice.ui.toast");function et(){var e=document.getElementById("apc-toast-container");return e||((e=document.createElement("div")).id="apc-toast-container",document.body.appendChild(e)),e}Ye.defaultTitle={},Ye.defaultTitle.error="Attention!",Ye.defaultTitle.warn="Warning!",Ye.defaultTitle.info="Information",Ye.defaultTitle.success="Sucess!";var tt=new WeakMap,nt=new WeakMap,it=new WeakMap,rt=new WeakMap,ot=new WeakMap,at=new WeakMap,st=new WeakSet,ct=new WeakSet,lt=new WeakSet,ut=new WeakSet,ht=function(){function e(n){t(this,e),ut.add(this),lt.add(this),ct.add(this),st.add(this),tt.set(this,{writable:!0,value:void 0}),nt.set(this,{writable:!0,value:void 0}),it.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),ot.set(this,{writable:!0,value:void 0}),at.set(this,{writable:!0,value:void 0}),p(this,tt,n.style),p(this,nt,{text:n.title}),p(this,it,{text:n.message}),p(this,rt,{resource:n.icon}),p(this,at,n.dismiss),y(this,ut,pt).call(this)}return i(e,[{key:"title",get:function(){return v(this,nt).text||!1===v(this,nt).text?v(this,nt).text:Ye.defaultTitle[v(this,tt)]}},{key:"message",get:function(){return v(this,it).text}},{key:"dismiss",value:function(){var e=this;v(this,ot)&&(v(this,ot).style.animationName="bounce-out",setTimeout((function(){v(e,ot).parentElement.removeChild(v(e,ot)),p(e,ot,null)}),500))}},{key:"appendTo",value:function(e){e.insertBefore(v(this,ot),e.firstChild)}}]),e}();function ft(){var e=this.title;e?(v(this,nt).box||(v(this,nt).box=document.createElement("div"),v(this,nt).box.className="apc-header",v(this,ot).appendChild(v(this,nt).box)),v(this,nt).box.style.display="block",v(this,nt).box.innerHTML=e):v(this,nt).box&&(v(this,nt).box.style.display="none")}function dt(){v(this,it).box||(v(this,it).box=document.createElement("div"),v(this,it).box.className="apc-body",v(this,ot).appendChild(v(this,it).box)),v(this,it).box.innerHTML=this.message}function vt(){v(this,rt).resource?(v(this,rt).box||(v(this,rt).box=document.createElement("div"),v(this,rt).box.className="apc-icon",v(this,ot).appendChild(v(this,rt).box)),!0===v(this,rt).resource&&(v(this,rt).box.innerHTML="&nbsp;")):v(this,rt).box&&(v(this,rt).box.style.display="none")}function pt(){var e=this;v(this,ot)||p(this,ot,document.createElement("div")),v(this,ot).className="apc-toast apc-"+v(this,tt),y(this,lt,vt).call(this),y(this,st,ft).call(this),y(this,ct,dt).call(this),"number"==typeof v(this,at)?setTimeout((function(){e.dismiss()}),1e3*v(this,at)):!0===v(this,at)&&(v(this,ot).onclick=function(){e.dismiss()},v(this,ot).className+=" apc-clickable")}function gt(t){var n,i={style:t,title:null,message:null,icon:!0,dismiss:!0};1==(arguments.length<=1?0:arguments.length-1)?"object"===e(arguments.length<=1?void 0:arguments[1])?Object.assign(i,arguments.length<=1?void 0:arguments[1]):i.message=arguments.length<=1?void 0:arguments[1]:(i.title=arguments.length<=1?void 0:arguments[1],i.message=arguments.length<=2?void 0:arguments[2],i.dismiss=null===(n=arguments.length<=3?void 0:arguments[3])||void 0===n||n);if(i.message){var r=new ht(i),o=et();r.appendTo(o)}else Ze.warn("A toast has been requested without message. The toast has been ignored")}Qe.error=function(){gt.apply(void 0,["error"].concat(Array.prototype.slice.call(arguments)))},Qe.warn=function(){gt.apply(void 0,["warn"].concat(Array.prototype.slice.call(arguments)))},Qe.info=function(){gt.apply(void 0,["info"].concat(Array.prototype.slice.call(arguments)))},Qe.success=function(){gt.apply(void 0,["success"].concat(Array.prototype.slice.call(arguments)))},Qe.setMax=function(){};var yt={},mt=k.getLogger("apice.ui.form");function wt(e){return"xs"===e.size?" apc-xs":"sm"===e.size?" apc-sm":e.size&&"md"!==e.size?"lg"===e.size?" apc-lg":" apc-xl":" apc-md"}function bt(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=n,e.appendChild(i)}function kt(e,t){if(t)if("function"!=typeof t)t instanceof Promise?t.then((function(t){kt(e,t)})).catch((function(e){console.err(e)})):(Array.isArray(t)&&0!==t.length||(t=["No data"]),bt(e,"Please select...",""),t.map((function(t){bt(e,t.label,t.value)})));else{var n=t();kt(e,n)}}var Et=new WeakMap,Mt=new WeakMap,Wt=function(){function e(n,i){t(this,e),Et.set(this,{writable:!0,value:void 0}),Mt.set(this,{writable:!0,value:void 0}),p(this,Et,document.createElement("div")),v(this,Et).className=n+wt({size:i}),v(this,Et).innerHTML="&nbsp;"}return i(e,[{key:"render",value:function(e){v(this,Mt)||(p(this,Mt,!0),e.appendChild(v(this,Et)))}}]),e}(),_t=new WeakMap,Tt=new WeakMap,St=new WeakMap,At=function(){function e(n){if(t(this,e),_t.set(this,{writable:!0,value:void 0}),Tt.set(this,{writable:!0,value:void 0}),St.set(this,{writable:!0,value:void 0}),!n)throw Error("apice.ui.form.button.null_specs");n.id||(n.id="btn_"+G.tinyId()),p(this,_t,n.id),p(this,Tt,document.createElement("button")),v(this,Tt).id=n.id,v(this,Tt).className="apc-button",v(this,Tt).innerHTML=n.label,p(this,St,!1)}return i(e,[{key:"click",value:function(e){0!==arguments.length?v(this,Tt).onclick="function"==typeof e?e:null:v(this,Tt).onclick&&v(this,Tt).onclick()}},{key:"render",value:function(e){v(this,St)||(p(this,St,!0),e.appendChild(v(this,Tt)))}}]),e}(),Lt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Pt=function(){function e(){t(this,e),Lt.set(this,{writable:!0,value:void 0}),Ct.set(this,{writable:!0,value:void 0}),xt.set(this,{writable:!0,value:void 0}),p(this,Lt,[]),p(this,Ct,!1),p(this,xt,document.createElement("div")),v(this,xt).className="apc-button-bar"}return i(e,[{key:"addButton",value:function(e){if(e){var t=new At(e);return v(this,Lt).push(t),v(this,Ct)&&t.render(),t}}},{key:"render",value:function(e){var t=this;v(this,Ct)||(p(this,Ct,!0),v(this,Lt).map((function(e){return e.render(v(t,xt))})),e.appendChild(v(this,xt)))}}]),e}(),Nt=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Ot=new WeakMap,qt=new WeakMap,Ht=new WeakMap,It=new WeakSet,Bt=new WeakSet,Ft=function(){function e(n){var i,r;t(this,e),Bt.add(this),It.add(this),Nt.set(this,{writable:!0,value:void 0}),Rt.set(this,{writable:!0,value:void 0}),jt.set(this,{writable:!0,value:void 0}),Ot.set(this,{writable:!0,value:void 0}),qt.set(this,{writable:!0,value:void 0}),Ht.set(this,{writable:!0,value:void 0}),n.id||(n.id="field_"+G.tinyId()),n.type||(n.type="input"),p(this,Nt,n.id),p(this,Rt,n.type),p(this,jt,n.label),p(this,Ot,document.createElement("div")),v(this,Ot).className=(r="apc-field","input"===(i=n).type?r+=" apc-text":"check"===i.type?r+=" apc-check":"select"===i.type&&(r+=" apc-select"),r+wt(i)),y(this,Bt,zt).call(this,n)}return i(e,[{key:"render",value:function(e){v(this,qt)&&v(this,Ot).appendChild(v(this,qt)),y(this,It,Ut).call(this),e.appendChild(v(this,Ot))}}]),e}();function Ut(){if(v(this,jt)){var e=document.createElement("label");e.setAttribute("for",v(this,Nt)),e.className="apc-label",e.innerHTML=v(this,jt),v(this,Ot).appendChild(e)}}function zt(e){"input"===v(this,Rt)?(p(this,qt,document.createElement("input")),v(this,qt).type="text"):"check"===v(this,Rt)?(p(this,qt,document.createElement("input")),v(this,qt).type="checkbox"):"select"===v(this,Rt)&&(p(this,qt,document.createElement("select")),kt(v(this,qt),e.source))}var Dt=new WeakMap,Xt=new WeakMap,Gt=new WeakMap,$t=new WeakMap,Jt=new WeakSet,Vt=function(){function e(n){t(this,e),Jt.add(this),Dt.set(this,{writable:!0,value:void 0}),Xt.set(this,{writable:!0,value:void 0}),Gt.set(this,{writable:!0,value:void 0}),$t.set(this,{writable:!0,value:void 0}),p(this,Dt,"form_"+G.tinyId()),p(this,Gt,[]),p(this,Xt,!1);var i=document.createElement("div");i.id=v(this,Dt),i.className="apc-form",p(this,$t,i),z(n).append(i)}return i(e,[{key:"addField",value:function(e){if(e){var t=new Ft(e);return y(this,Jt,Kt).call(this,t),t}}},{key:"addSpacer",value:function(e){var t=new Wt("apc-spacer",e);y(this,Jt,Kt).call(this,t)}},{key:"addBreak",value:function(){var e=new Wt("apc-break");y(this,Jt,Kt).call(this,e)}},{key:"addButtonBar",value:function(){var e=new Pt;return y(this,Jt,Kt).call(this,e),e}},{key:"addButton",value:function(e){if(e){var t=new At(e);return y(this,Jt,Kt).call(this,t),t}}},{key:"render",value:function(){var e=this;if(!v(this,Xt))return p(this,Xt,!0),v(this,Gt).map((function(t){return t.render(v(e,$t))})),this}}]),e}();function Kt(e){e&&(v(this,Gt).push(e),v(this,Xt)&&e.render(v(this,$t)))}function Qt(e){if(!e)return null;if("INPUT"===e.tagName&&"checkbox"===e.type){if(""===e.value||"on"===e.value)return e.checked;if(!e.checked)return null}return e.value}function Yt(e){var t=e.select("[collect]");if(!t)return mt.warn("apice.form.collect.no_collectable_fields"),{};var n={};return t.each((function(e){!function(e,t){var n=t.getAttribute("collect");if(n){n=n.split(".");for(var i=0;i<n.length;i++){var r=n[i];if(i<n.length-1)e[r]||(e[r]={}),e=e[r];else{var o=Qt(t);null!==o&&(e[r]=o)}}}}(n,e)})),n}yt.create=function(e){return new Vt(e)},yt.collect=function(e){e||(e=document.body);var t=z(e);return t?Yt(t):(mt.warn("apice.form.collect.unknown_container[".concat(e,"]")),null)};var Zt={},en=k.getLogger("apice.ui.box");function tn(e,t){var n=document.createElement("div");return n.className=e,t&&(n.id=t),n}function nn(e,t){var n=tn("apc-box",e.id);e.fullscreen?n.className+=" apc-full":Array.isArray(e.size)&&(n.className+=" apc-non-full",n.style.width=e.size[0],n.style.height=e.size[1]);var i=tn("apc-box-content"),r={};return r.header=function(e,t){var n=tn("apc-header");return n.style.display="none",t.appendChild(n),z(n)}(0,i),r.body=function(e){var t=tn("apc-body");return t.innerHTML="BOX-CONTENT",e.appendChild(t),z(t)}(i),r.footer=function(e,t){var n=tn("apc-footer");return n.innerHTML="BOX-FOOTER",n.style.display="none",t.appendChild(n),z(n)}(0,i),r.area=n,n.appendChild(i),e.closeable&&function(e,t){var n=tn("apc-closing"),i=document.createElement("button");n.appendChild(i),e.appendChild(n),i.onclick=function(){t.close()}}(n,t),r}var rn=new WeakMap,on=new WeakMap,an=new WeakMap,sn=new WeakMap,cn=function(){function e(n){t(this,e),rn.set(this,{writable:!0,value:void 0}),on.set(this,{writable:!0,value:void 0}),an.set(this,{writable:!0,value:void 0}),sn.set(this,{writable:!0,value:void 0}),n.id||(n.id="box-"+G.tinyId()),p(this,rn,n.id),en.info("Creating box. id={0}",n.id),p(this,sn,-1),p(this,on,nn(n,this))}return i(e,[{key:"appendTo",value:function(e){return z.append(e,v(this,on).area),p(this,an,v(this,on).area.parentElement),p(this,sn,v(this,an)?0:-1),this}},{key:"close",value:function(){return 1===v(this,sn)&&(en.info("Closing box. id={0}",v(this,rn)),v(this,an).removeChild(v(this,on).area),p(this,sn,0)),this}},{key:"open",value:function(){return 0===v(this,sn)&&(v(this,an).appendChild(v(this,on).area),p(this,sn,1)),this}},{key:"content",value:function(e){var t=this;return m.isPromise(e)?e.then((function(e){t.content(e)})).catch((function(e){t.close(),$.render(e)})):Oe.isFragment(e)?e.render(v(this,on).body):v(this,on).body.content(e),this}}]),e}();Zt.create=function(e){return e?"string"==typeof e&&(e={id:e}):e={},"boolean"!=typeof e.fullscreen&&(e.fullscreen=!1),"boolean"!=typeof e.closeable&&(e.closeable=!1),e.size||e.fullscreen||(e.size=["50%","50%"]),new cn(e)};var ln={},un=k.getLogger("apice.ui.mask");ln.show=function(){return un.trace("Showing protective mask"),new Promise((function(e){var t=document.getElementById("apice-mask");t||((t=document.createElement("div")).id="apice-mask",t.className="apc-mask",document.body.appendChild(t)),t.style.display="block",x.waitAnimation(t,"apc-mask apc-open",e)}))},ln.hide=function(){return un.trace("Hidding protective mask"),new Promise((function(e){var t=document.getElementById("apice-mask");t&&x.waitAnimation(t,"apc-mask apc-closed",(function(){t.style.display="none",e()}))}))};var hn={},fn=k.getLogger("apice.ui.dialog"),dn={};function vn(e,t){var n=document.createElement("div");return n.className=t,e.append(n),z(n)}function pn(e,t){if(1===dn.status)return fn.debug("Dialog container is already visible"),Promise.resolve();dn.status=1,function(){if(!dn.container){fn.debug("Creating the dialog container");var e=document.getElementById("apice-dialog");e||((e=document.createElement("div")).id="apice-dialog",e.className="apc-dialog",document.body.appendChild(e)),e=z(e),dn.container=e,dn.header=vn(e,"apc-header"),dn.body=vn(e,"apc-body"),dn.footer=vn(e,"apc-footer apc-button-bar")}}(),fn.debug("Displaying the dialog container"),t();var n=[];return n[0]=ln.show(),n[1]=new Promise((function(t){x.waitAnimation(dn.container,"apc-dialog apc-open apc-"+e,t)})),Promise.all(n)}function gn(e,t){if(t){"close"===t&&(t={label:"Close",close:!0});var n=document.createElement("button");n.className="apc-button",n.innerHTML=t.label,"function"==typeof t.action?n.onclick=function(){!1!==t.action()&&!1!==t.close&&e.close()}:t.close&&(n.onclick=function(){e.close()}),dn.footer.append(n)}}dn.current=null,dn.queue=[],dn.container=null,dn.header=null,dn.body=null,dn.footer=null,dn.status=0,dn.titles={},dn.titles.error="Atention!",dn.titles.warn="Warning!",dn.titles.info="Information",dn.titles.success="Success!";var yn=new WeakMap,mn=new WeakMap,wn=new WeakMap,bn=new WeakMap,kn=new WeakMap,En=new WeakMap,Mn=function(){function e(n){t(this,e),yn.set(this,{writable:!0,value:void 0}),mn.set(this,{writable:!0,value:void 0}),wn.set(this,{writable:!0,value:void 0}),bn.set(this,{writable:!0,value:void 0}),kn.set(this,{writable:!0,value:void 0}),En.set(this,{writable:!0,value:void 0}),n.id||(n.id="dialog_".concat(G.tinyId())),p(this,yn,n.id),p(this,mn,n.style),p(this,bn,n.title),p(this,kn,n.body),p(this,En,[]),p(this,wn,{}),v(this,wn).close=[]}return i(e,[{key:"id",get:function(){return v(this,yn)}},{key:"title",get:function(){return v(this,bn)?v(this,bn):dn.titles[v(this,mn)]}},{key:"open",value:function(){var e=this;return dn.current===this?(fn.debug("The dialog instance is already opened. id={0}",this.id),Promise.resolve()):dn.current?(fn.debug("Another dialog instance is opened. The current dialog is queued. id={0}",this.id),new Promise((function(t,n){dn.queue.push({dialog:e,resolve:t,reject:n})}))):(fn.debug("Opening dialog instance. id={0}",this.id),dn.current=this,pn(v(this,mn),(function(){dn.header.content(e.title),dn.body.content(v(e,kn)),dn.footer.content("");for(var t=0;t<v(e,En).length;t++){var n=v(e,En)[t];gn(e,n)}})))}},{key:"close",value:function(){var e=this;return dn.current!==this?(fn.debug("The dialog cannot be closed because it is not opened. Removing it from the queue. id={0}",this.id),function(e){if(e){for(var t=0;t<dn.queue.length;t++)if(dn.queue[t].dialog===e)return dn.queue.splice(t,1),void fn.debug("The dialog has been removed. id={0}",e.id);fn.warn("The dialog instance could not be removed from the queue since it was not found. id={0}",e.id)}}(this),Promise.resolve()):(fn.debug("Closing dialog. id={0}",this.id),dn.current=null,function(){if(0===dn.status)return fn.debug("Dialog container is already closed"),Promise.resolve();dn.status=0,fn.debug("Closing the dialog container");var e=[];return e[0]=ln.hide(),e[1]=new Promise((function(e){x.waitAnimation(dn.container,"apc-dialog apc-closed",(function(){dn.header.content(""),dn.body.content(""),dn.footer.content(""),e()}))})),Promise.all(e)}().then((function(){!function(e){for(var t=0;t<e.length;t++){var n=e[t];try{n()}catch(e){fn.error("An error has occurred trying to execute an event listener",e)}}}(v(e,wn).close),function(){if(0===dn.queue.length)return fn.debug("No more dialogs in the queue"),!1;fn.debug("Opening the next dialog from the queue");var e=dn.queue.shift();e.dialog.open().then(e.resolve).catch(e.reject)}()})))}},{key:"onClose",value:function(e){"function"==typeof e&&v(this,wn).close.push(e)}},{key:"addButton",value:function(e){return e&&v(this,En).push(e),this}}]),e}();function Wn(e,t){return"string"==typeof t?t={body:t}:t||(t={}),t.style=e,new Mn(t)}hn.error=function(e){return Wn("error",e)},hn.warn=function(e){return Wn("warn",e)},hn.info=function(e){return Wn("info",e)},hn.success=function(e){return Wn("success",e)};var _n={toast:Qe,form:yt,box:Zt,dialog:hn},Tn={};function Sn(){return!0===arguments[0]?{major:Tn.version.major,minor:Tn.version.minor,patch:Tn.version.patch}:"v"+Tn.version.major+"."+Tn.version.minor+"."+Tn.version.patch}return Tn.version={major:0,minor:1,patch:3},console.log("%cApice Framework ".concat(Sn()),"color: #64dd17;"),{version:Sn,ready:function(e){x.documentReady(e)},logging:k,util:m,events:x,element:z,cookies:b,http:re,controller:we,fragment:Oe,router:Ie,error:$,ui:_n,form:yt}}();
//# sourceMappingURL=apice.min.js.map
