var apice=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,g(e,t,"get"))}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,g(e,t,"set"),n),n}function g(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function y(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var w={isPromise:function(e){return e instanceof Promise},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m=/\{(\d+)\}/g;w.placeholders=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i={output:e,unbind:n};if("string"!=typeof e)return i;var o,a={},s=e.matchAll(m),c=d(s);try{for(c.s();!(o=c.n()).done;){var l=o.value,u=l[1];if(u&&!a[u]){a[u]=!0;var h=new RegExp("\\{"+u+"\\}","g"),f=n[u];i.unbind[u]=null,i.output=i.output.replace(h,f)}}}catch(e){c.e(e)}finally{c.f()}return i.unbind=i.unbind.filter((function(e){return null!=e})),i};var b={set:function(e,t,n){if("string"!=typeof e)throw Error("apice.cookies.set.invalid_name");if("number"!=typeof n)throw Error("apice.cookies.set.invalid_timespan");var r=new Date;r.setTime(r.getTime()+1e3*n);var i=w.trim(e)+"="+t+"; expires="+r.toGMTString()+"; path=/";document.cookie=i},get:function(e){if("string"!=typeof e)throw Error("apice.cookies.get.invalid_name");for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=w.trim(t[n]);if(r){var i=r.split("=");if(w.trim(i[0])===e)return i[1]}}return null}},k={},E={loggers:{},levels:{fatal:{value:10,color:"#ff4444",label:"FATAL"},error:{value:20,color:"#ff4444",label:"ERROR"},warn:{value:30,color:"#ff8800",label:"WARNING"},info:{value:40,color:"#0099cc",label:"INFO"},debug:{value:50,color:"#3E4551",label:"DEBUG"},trace:{value:60,color:"#3E4551",label:"TRACE"}}},M=b.get("apice.logger.level");M?(E.globalLevel=E.levels[M],E.globalLevel||(E.globalLevel=E.levels.warn)):E.globalLevel=E.levels.warn;var W=new WeakMap,_=new WeakMap,S=new WeakSet,x=function(){function e(n){t(this,e),S.add(this),W.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),p(this,W,n);var r=b.get("apice.logger.["+n+"].level");r?(p(this,_,E.levels[r]),v(this,_)||p(this,_,E.globalLevel)):p(this,_,E.globalLevel)}return r(e,[{key:"level",value:function(){if(0!==arguments.length){var e=E.levels[arguments[0]];if(!e)throw new Error("apice.logger.invalid_level["+arguments[0]+"]");p(this,_,e),b.set("apice.logger.["+v(this,W)+"].level",arguments[0],1800)}return v(this,_).label}},{key:"fatal",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=y(this,S,L)).call.apply(t,[this,E.levels.fatal,e].concat(r))}},{key:"error",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=y(this,S,L)).call.apply(t,[this,E.levels.error,e].concat(r))}},{key:"warn",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=y(this,S,L)).call.apply(t,[this,E.levels.warn,e].concat(r))}},{key:"info",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=y(this,S,L)).call.apply(t,[this,E.levels.info,e].concat(r))}},{key:"debug",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=y(this,S,L)).call.apply(t,[this,E.levels.debug,e].concat(r))}},{key:"trace",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=y(this,S,L)).call.apply(t,[this,E.levels.trace,e].concat(r))}}]),e}();function L(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(v(this,_).value>=e.value){var o;if("string"!=typeof t)t=JSON.stringify(t);else if(r&&r.length>0){var a=w.placeholders.apply(w,[t].concat(u(r)));t=a.output,r=a.unbind}(o=console).log.apply(o,["%c["+e.label+"]["+v(this,W)+"]: "+t].concat(["color: "+e.color].concat(u(r))))}}k.getLogger=function(e){return e||(e="system"),E.loggers[e]||(E.loggers[e]=new x(e)),E.loggers[e]},k.level=function(){var e;if(1===arguments.length){var t=E.levels[arguments[0]];if(!t)throw new Error("apice.logger.invalid_level["+arguments[0]+"]");for(var n in E.globalLevel=t,b.set("apice.logger.level",arguments[0],1800),E.loggers){var r=E.loggers[n];r.level(arguments[0])}}else if(2===arguments.length){var i=k.getLogger(arguments[0]);return i.level(arguments[1]),i.level()}return null===(e=E.globalLevel)||void 0===e?void 0:e.label};var A={addListener:function(e,t,n){if(!e)throw new Error("apice.util.event.invalid_target");if(!t||"string"!=typeof t)throw new Error("apice.util.event.invalid_event_name");"function"==typeof n&&("function"==typeof e.addEventListener?e.addEventListener(t,n,!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n))},documentReady:function(e){"complete"===document.readyState?e():"function"==typeof document.addEventListener?document.addEventListener("DOMContentLoaded",e,!1):"function"==typeof document.attachEvent&&document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&e()}))}},T={};function R(e){if(!e||"string"!=typeof e)return null;var t=document.createElement("div");return t.innerHTML=e,u(t.childNodes)}var P=function e(){t(this,e)},j=new WeakMap,C=function(e){i(o,e);var n=l(o);function o(e){var r;return t(this,o),r=n.call(this),j.set(s(r),{writable:!0,value:void 0}),p(s(r),j,e),r}return r(o,[{key:"isValid",get:function(){return!!v(this,j)}},{key:"each",value:function(e){return"function"==typeof e&&v(this,j)&&e(v(this,j)),this}},{key:"content",value:function(){var e=this;if(0===arguments.length)return v(this,j)?v(this,j).innerHTML:null;if(v(this,j)){var t=arguments[0];t?t instanceof P?(v(this,j).innerHTML="",t.each((function(t){v(e,j).append(t)}))):v(this,j).innerHTML=t:t=""}return this}},{key:"append",value:function(){var e=this;if(v(this,j)&&arguments.length>0)if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.append(arguments[t]);else{var n=arguments[0];if(n instanceof P)n.each((function(t){v(e,j).appendChild(t)}));else if("string"==typeof n){n=R(n);for(t=0;t<n.length;t++)v(this,j).appendChild(n[t])}else if(I(n))v(this,j).appendChild(n);else if(n instanceof NodeList)for(t=0;t<n.length;t++){var r=n[t];v(this,j).appendChild(r)}}return this}},{key:"prepend",value:function(){var e=this;if(v(this,j)&&arguments.length>0)if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.prepend(arguments[t]);else{var n=v(this,j).firstChild,r=arguments[0];if(r instanceof P)r.each((function(t){v(e,j).insertBefore(t,n)}));else if("string"==typeof r){r=R(r);for(t=0;t<r.length;t++)v(this,j).insertBefore(r[t],n)}else if(I(r))v(this,j).insertBefore(r,n);else if(r instanceof NodeList)for(t=0;t<r.length;t++){var i=r[t];v(this,j).insertBefore(i,n)}}return this}},{key:"on",value:function(e,t){if(!e)throw new Error("apice.element.on.no_event_name");return v(this,j)&&"function"==typeof t&&A.addListener(v(this,j),e,t),this}}]),o}(P),N=new WeakMap,O=new WeakSet,F=function(e){i(o,e);var n=l(o);function o(){var e;return t(this,o),e=n.call(this),O.add(s(e)),N.set(s(e),{writable:!0,value:void 0}),p(s(e),N,[]),e}return r(o,[{key:"add",value:function(e){return e&&v(this,N).push(e),this}},{key:"each",value:function(){return y(this,O,H).call(this,"each",arguments),this}},{key:"content",value:function(){return 0===arguments.length?y(this,O,H).call(this,"content",arguments):(y(this,O,H).call(this,"content",arguments),this)}},{key:"append",value:function(){return y(this,O,H).call(this,"append",arguments),this}},{key:"prepend",value:function(){return y(this,O,H).call(this,"prepend",arguments),this}},{key:"on",value:function(){return y(this,O,H).call(this,"on",arguments),this}}]),o}(P);function H(e,t){for(var n=[],r=0;r<v(this,N).length;r++){var i=v(this,N)[r],o=i[e];if("function"==typeof o)try{var a=o.apply(i,t);n.push(a)}catch(t){console.log("itaca.element.node_call[".concat(e,"]"),t)}}return n}function I(t){return t&&"object"===e(t)&&1===t.nodeType}function B(e){return e?"body"===e||e===document.body?(T.bodySingleton||(T.bodySingleton=new C(document.body)),T.bodySingleton):"string"==typeof e?function(e){var t=document.querySelectorAll(e);if(0===t.length)return null;if(1===t.length)return new C(t[0]);for(var n=new F,r=0;r<t.length;r++){var i=t[r];n.add(new C(i))}return n}(e):e instanceof P?e:I(e)?new C(e):null:null}function q(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function U(){return q()+q()}var z={tinyId:q,shortId:U,guid:function(){return U()+"-"+U()+"-"+U()+"-"+U()+U()}},D={},G=new WeakMap,X=new WeakMap,$=new WeakMap,J=new WeakMap,V=new WeakMap,K=new WeakSet,Q=function(){function e(n){t(this,e),K.add(this),G.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:void 0}),$.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),p(this,V,z.guid()),p(this,X,n.message),p(this,$,n.cause),p(this,G,n.module),p(this,J,n.code)}return r(e,[{key:"guid",get:function(){return v(this,V)}},{key:"message",get:function(){var e;return null!==(e=v(this,X))&&void 0!==e?e:"An error has occurred. Please contact the technical support without closing this screen."}},{key:"cause",get:function(){return v(this,$)}},{key:"code",get:function(){return v(this,J)}},{key:"log",value:function(){var e=k.getLogger(v(this,G)),t="ref=[".concat(v(this,V),"]");v(this,J)&&(t+="\n-> (c) ".concat(v(this,J))),t+=y(this,K,Y).call(this,v(this,$)),e.error(t)}},{key:"render",value:function(e){this.log();var t=B(e);t?t.content('<div class="badge badge-error">            <div class="header">Atention!</div>            <div class="content">'.concat(this.message,'</div>            <div class="details">').concat(v(this,V),"</div>        </div>")):Apice.ui.toast.error("".concat(this.message,"<div>").concat(v(this,V),"</div>"))}}]),e}();function Y(e){return e?"string"==typeof e?"\n-> (s) ".concat(e):e instanceof Error?"\n-> (e) ".concat(e.stack):v(this,$)instanceof Q?"\n-> (n) ".concat(e.code)+y(this,K,Y).call(this,e.cause):v(this,$)instanceof ee?"\n-> (h) http-error[".concat(e.code,"]"):void 0:""}D.create=function(t){if(!t)return console.error("apice.error_handler.create.null_input"),null;var n=e(t);if("string"===n)t={code:t};else if(t instanceof Error)t={cause:t};else if("object"!==n)return console.error("apice.error_handler.create.invalid_input",t),null;return new Q(t)},D.render=function(e,t){e&&(e instanceof Q||(e=D.create(e)),e.render(t))};var Z=new WeakMap,ee=function(){function e(n){t(this,e),Z.set(this,{writable:!0,value:void 0}),p(this,Z,n)}return r(e,[{key:"type",get:function(){return"http"}},{key:"code",get:function(){return v(this,Z)}}]),e}();D.createHttpError=function(e){return new ee(e)},window.addEventListener("unhandledrejection",(function(e){e.reason instanceof Q&&(e.preventDefault(),e.reason.render())}));var te={};function ne(e,t){var n=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw Error("apice.http.xmlhttp_creation_error")}}}();return n.onreadystatechange=function(){4!=n.readyState&&"complete"!==n.readyState||(200==n.status?e(n.responseText):t(D.createHttpError(n.status)))},n}te.request=function(e,t){return"string"==typeof e&&e?(t||(t={}),t.method||(t.method="GET"),new Promise((function(n,r){var i=ne(n,r);i.open(t.method,e,!1!==t.async),"GET"!==t.method&&t.data?i.send(t.data):i.send()}))):Promise.reject("apice.http.null_url")},te.loadScript=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.type="text/javascript",r.async=!1,r.onerror=function(){n(D.create({module:"apice.http",code:"apice.http.load_script_error[".concat(e,"]")}))},r.onload=function(){t()},document.head.appendChild(r)}))};var re=new WeakMap,ie=new WeakMap,oe=new WeakMap,ae=new WeakMap,se=function(){function e(n,r,i,o){var a;if(t(this,e),re.set(this,{writable:!0,value:void 0}),ie.set(this,{writable:!0,value:void 0}),oe.set(this,{writable:!0,value:void 0}),ae.set(this,{writable:!0,value:void 0}),!v(this,ie))throw new Error("apice.http.url.no_host");p(this,re,null!=n?n:"https"),p(this,ie,r),p(this,oe,null!=i?i:"80"),p(this,ae,null!==(a=v(this,ae))&&void 0!==a?a:"")}return r(e,[{key:"protocol",get:function(){return v(this,re)}},{key:"host",get:function(){return v(this,ie)}},{key:"port",get:function(){return v(this,oe)}},{key:"path",get:function(){return v(this,ae)}},{key:"toString",value:function(){return v(this,re)+"://"+v(this,ie)+":"+v(this,oe)+"/"+v(this,ae)}},{key:"resourceUrl",value:function(e,t,n){var r=this.toString();return e&&"string"==typeof e&&(r.endsWith("/")||e.startsWith("/")||(r+="/"),r+=e),t&&"string"==typeof t&&(t.startsWith("?")||(r+="?"),r+=t),n&&"string"==typeof n&&(n.startsWith("#")||(r+="#"),r+=n),r}},{key:"get",value:function(e,t,n){var r=this.resourceUrl(e,t,n);return te.request(r,{method:"GET"})}},{key:"post",value:function(e,t){var n=this.resourceUrl(e);return te.request(n,{method:"POST",data:t})}},{key:"put",value:function(e,t){var n=this.resourceUrl(e);return te.request(n,{method:"PUT",data:t})}},{key:"delete",value:function(e,t){var n=this.resourceUrl(e);return te.request(n,{method:"DELETE",data:t})}}]),e}(),ce=new WeakMap,le=new WeakMap,ue=new WeakMap,he=new WeakMap,fe=function(){function n(){t(this,n),ce.set(this,{writable:!0,value:void 0}),le.set(this,{writable:!0,value:void 0}),ue.set(this,{writable:!0,value:void 0}),he.set(this,{writable:!0,value:void 0})}return r(n,[{key:"protocol",value:function(e){return p(this,ce,e),this}},{key:"host",value:function(e){return p(this,le,e),this}},{key:"port",value:function(t){var n=e(t);if("string"===n)p(this,ue,t);else{if("number"!==n)throw new Error("apice.http.url_builder.invalid_port");p(this,ue,String(t))}return this}},{key:"path",value:function(e){return p(this,he,e),this}},{key:"build",value:function(){return new se(v(this,ce),v(this,le),v(this,ue),v(this,he))}}]),n}();te.url=function(){return new fe};var de="apc.controller",ve=k.getLogger(de),pe={controllers:{}},ge=function(e){if("string"==typeof e){var t=pe.controllers[e];if(!t)throw Error("apice.controller.unknown_controller[".concat(e,"]"));return t}},ye=new WeakMap,we=new WeakMap,me=new WeakSet,be=new WeakSet,ke=function(){function n(e,r){t(this,n),be.add(this),me.add(this),ye.set(this,{writable:!0,value:void 0}),we.set(this,{writable:!0,value:void 0}),p(this,ye,e),p(this,we,r)}return r(n,[{key:"name",get:function(){return v(this,ye)}},{key:"declare",value:function(e){if("function"!=typeof e)throw new Error("apice.controller.declare.invalid_implementation[".concat(v(this,ye),"]"));p(this,we,e)}},{key:"serve",value:function(){var t=e(v(this,we));return"function"===t?y(this,me,Ee).call(this):"string"===t?y(this,be,Me).call(this):Promise.reject(D.create({module:de,code:"apice.controller.bad_implementation[".concat(v(this,ye),"]")}))}}]),n}();function Ee(){var e=this;return ve.debug("Serving controller. controller={0}",v(this,ye)),new Promise((function(t,n){try{v(e,we).call(e),t()}catch(t){n(D.create({module:de,cause:t,code:"apice.controller.serve.implementation_error[".concat(v(e,ye),"]")}))}}))}function Me(){var e=this;return ve.debug("Loading controller. controller={0}",v(this,ye)),new Promise((function(t,n){te.loadScript(v(e,we)).then((function(){setTimeout((function(){"string"==typeof v(e,we)?n("apice.controller.serve.undeclared[".concat(v(e,ye),"]")):y(e,me,Ee).call(e).then(t).catch(n)}),0)})).catch((function(t){n(D.create({module:de,cause:t,code:"apice.controller.load_script_error[".concat(v(e,ye),"]")}))}))}))}ge.register=function(e,t){ve.debug("Registering controller. controller={0)",e);var n=new ke(e,t);return pe.controllers[e]=n,n},ge.declare=function(e,t){ve.debug("Declaring controller. controller={0}",e);var n=pe.controllers[e];if(!n)throw Error("apice.controller.declare.unknown_controller[".concat(e,"]"));n.declare(t)},ge.isController=function(e){return e&&e instanceof ke};var We="apice.fragment",_e=k.getLogger(We),Se={fragments:{}},xe=new WeakMap,Le=new WeakMap,Ae=new WeakMap,Te=new WeakSet,Re=function(){function e(n,r,i){t(this,e),Te.add(this),xe.set(this,{writable:!0,value:void 0}),Le.set(this,{writable:!0,value:void 0}),Ae.set(this,{writable:!0,value:void 0}),p(this,xe,n),p(this,Le,r),p(this,Ae,i)}return r(e,[{key:"name",get:function(){return v(this,xe)}},{key:"render",value:function(e){var t=this;e||(e="body");var n=B(e);return n?(_e.debug("Serving fragment. fragment={0}",v(this,xe)),new Promise((function(e,r){te.request(v(t,Le),{method:"GET"}).then((function(i){n.content(i),y(t,Te,Pe).call(t).then(e).catch(r)})).catch((function(e){r(D.create({module:We,message:"An error has occurred trying to load the content",cause:e,code:"apice.fragment.render_error[".concat(t.name,"]")}))}))}))):Promise.reject(D.create({module:We,code:"apice.fragment.render.target_not_found[".concat(e,"]")}))}}]),e}();function Pe(){var t=this;return v(this,Ae)?new Promise((function(n,r){var i=e(v(t,Ae));if("function"===i){_e.debug("Serving fragment controller function. fragment={0}",v(t,xe));try{v(t,Ae).call(t),n()}catch(e){r(D.create({module:We,cause:e,code:"apice.fragment.controller_function_error[".concat(v(t,xe),"]")}))}}else"string"===i&&(_e.debug("Serving fragment controller. fragment={0} controller={1}",v(t,xe),v(t,Ae)),ge(v(t,Ae)).serve().then(n).catch((function(e){r(D.create({module:We,cause:e,code:"apice.fragment.controller_serve_error[".concat(t.name,"]")}))})))})):Promise.resolve()}var je=function(e){if("string"==typeof e){var t=Se.fragments[e];if(!t)throw new Error("apice.fragment.unknown_fragment[".concat(e,"]"));return t}};je.register=function(e,t,n){_e.debug("Registering fragment. fragment={0}",e);var r=new Re(e,t,n);return Se.fragments[e]=r,r},je.isFragment=function(e){return e&&e instanceof Re};var Ce="apice.router",Ne=k.getLogger(Ce),Oe={},Fe={};function He(e){Ne.debug("Hash change triggered. event="+e);var t=Oe.hash(),n=Oe.match(t);if(n)Ne.debug("Serving route: "+n.pattern);else if(!Fe.defaultRoute||t&&Fe.notFoundRoute){if(!Fe.notFoundRoute)return void D.render({module:Ce,message:"The requested resource was not found: "+t,code:"apice.router.no_matching_no_default"});Ne.warn("Route not found. hash="+t+" route="+Fe.notFoundRoute.pattern),n=Fe.notFoundRoute}else t?Ne.warn("Route not found. Serving default hash="+t):Ne.debug("No hash found. Serving default router"),n=Fe.defaultRoute;n.serve()}Fe.routes=[],Fe.defaultRoute=null,Fe.notFoundRoute=null,Fe.target=null;var Ie=new WeakMap,Be=new WeakMap,qe=new WeakMap,Ue=new WeakSet,ze=function(){function e(n){if(t(this,e),Ue.add(this),Ie.set(this,{writable:!0,value:void 0}),Be.set(this,{writable:!0,value:void 0}),qe.set(this,{writable:!0,value:void 0}),!n||"string"!=typeof n)throw Error("apice.router.hah.invalid_pattern");p(this,Ie,n),y(this,Ue,De).call(this)}return r(e,[{key:"pattern",get:function(){return v(this,Ie)}},{key:"count",get:function(){return v(this,Be).length}},{key:"hasParameters",get:function(){return v(this,qe).length>0}}]),e}();function De(){p(this,Be,[]),p(this,qe,[]);for(var e=v(this,Ie).split("/"),t=0;t<e.length;t++){var n=e[t];n.startsWith(":")&&v(this,qe).push(n.substr(1)),v(this,Be).push(n)}}var Ge=new WeakMap,Xe=new WeakMap,$e=function(){function e(n,r){if(t(this,e),Ge.set(this,{writable:!0,value:void 0}),Xe.set(this,{writable:!0,value:void 0}),!n||"string"!=typeof n)throw Error("apice.route.constructor.invalid_route_value");if(!r)throw Error("apice.route.constructor.missing_route_action");p(this,Ge,new ze(n)),p(this,Xe,r)}return r(e,[{key:"pattern",get:function(){return v(this,Ge).pattern}},{key:"asDefault",value:function(){Fe.defaultRoute=this}},{key:"asNotFound",value:function(){Fe.notFoundRoute=this}},{key:"match",value:function(e){return!v(this,Ge).hasParameters&&e===v(this,Ge).pattern}},{key:"serve",value:function(){try{if("function"==typeof v(this,Xe))v(this,Xe).call(this);else if("string"==typeof v(this,Xe))je(v(this,Xe)).render(Fe.target);else if(je.isFragment(v(this,Xe)))v(this,Xe).render(Fe.target);else{if("function"!=typeof v(this,Xe).serve)throw Error("apice.router.invalid_action[".concat(this.pattern,"]"));v(this,Xe).serve()}}catch(e){D.render({module:Ce,message:"An error has occurred trying to serve the resource. Please contact technical support without closing this screen",code:"apice.router.serve_error[".concat(this.pattern,"]"),cause:e},Fe.target)}}}]),e}();Oe.register=function(e,t){Ne.debug("Registering route. pattern="+e);var n=new $e(e,t);return Fe.routes.push(n),n},Oe.match=function(e){if(!e||"string"!=typeof e)return null;for(var t=0;t<Fe.routes.length;t++){var n=Fe.routes[t];if(!0===n.match(e))return n}return null},Oe.hash=function(){var e=window.location.hash;return e.startsWith("#")&&(e=e.substr(1)),e},Oe.start=function(){return Ne.debug("Starting Apice router"),A.addListener(window,"hashchange",(function(){He("hashchange")})),A.documentReady((function(){He("routerstart")})),Oe},Oe.target=function(){if(0===arguments.length)return Fe.target;var e=arguments[0];if(e?(Fe.target=B(e),Fe.target||Ne.error("apice.router.target_notfound[".concat(e,"]"))):Fe.target=null,!Fe.target){Ne.info("Using default routing target container");var t=document.getElementById("apc-router-container");t||((t=document.createElement("div")).id="apc-router-container",document.body.appendChild(t)),Fe.target=B(t)}return Oe};var Je={},Ve={styles:{}};Ve.styles.info={title:"Information",icon:"",color:{}};var Ke=k.getLogger("apice.ui.toast");function Qe(){var e=document.getElementById("apc-toast-container");return e||((e=document.createElement("div")).id="apc-toast-container",document.body.appendChild(e)),e}var Ye=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakSet,ot=new WeakSet,at=new WeakSet,st=new WeakSet,ct=function(){function e(n){t(this,e),st.add(this),at.add(this),ot.add(this),it.add(this),Ye.set(this,{writable:!0,value:void 0}),Ze.set(this,{writable:!0,value:void 0}),et.set(this,{writable:!0,value:void 0}),tt.set(this,{writable:!0,value:void 0}),nt.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),p(this,Ye,n.style),p(this,Ze,{text:n.title}),p(this,et,{text:n.message}),p(this,tt,{resource:n.icon}),p(this,rt,n.dismiss),y(this,st,ft).call(this)}return r(e,[{key:"title",get:function(){if(!v(this,Ze).text&&!1!==v(this,Ze).text){if("error"===v(this,Ye))return"Error!";if("warn"===v(this,Ye))return"Warning!";if("info"===v(this,Ye))return"Info";if("success"===v(this,Ye))return"Success!"}return v(this,Ze).text},set:function(e){v(this,Ze).text=e,y(this,it,lt).call(this)}},{key:"message",get:function(){return v(this,et).text}},{key:"appendTo",value:function(e){e.appendChild(v(this,nt))}}]),e}();function lt(){var e=this.title;e?(v(this,Ze).box||(v(this,Ze).box=document.createElement("div"),v(this,Ze).box.className="apc-header",v(this,nt).appendChild(v(this,Ze).box)),v(this,Ze).box.style.display="block",v(this,Ze).box.innerHTML=e):v(this,Ze).box&&(v(this,Ze).box.style.display="none")}function ut(){v(this,et).box||(v(this,et).box=document.createElement("div"),v(this,et).box.className="apc-body",v(this,nt).appendChild(v(this,et).box)),v(this,et).box.innerHTML=this.message}function ht(){v(this,tt).resource?(v(this,tt).box||(v(this,tt).box=document.createElement("div"),v(this,tt).box.className="apc-icon",v(this,nt).appendChild(v(this,tt).box)),!0===v(this,tt).resource&&(v(this,tt).box.className="apc-icon icon-"+v(this,Ye),v(this,tt).box.innerHTML="&nbsp;")):v(this,tt).box&&(v(this,tt).box.style.display="none")}function ft(){v(this,nt)||p(this,nt,document.createElement("div")),v(this,nt).className="apc-toast toast-"+v(this,Ye),y(this,at,ht).call(this),y(this,it,lt).call(this),y(this,ot,ut).call(this)}function dt(){var e={title:null,message:null,icon:!0};if(e.style=arguments[0],2===arguments.length?e.message=arguments[1]:3===arguments.length&&(e.title=arguments[1],e.message=arguments[2]),e.message){var t=new ct(e),n=Qe();t.appendTo(n)}else Ke.warn("A toast has been requested without message. The toast has been ignored")}Je.error=function(){dt.apply(void 0,["error"].concat(Array.prototype.slice.call(arguments)))},Je.warn=function(){dt.apply(void 0,["warn"].concat(Array.prototype.slice.call(arguments)))},Je.info=function(){dt.apply(void 0,["info"].concat(Array.prototype.slice.call(arguments)))},Je.success=function(){dt.apply(void 0,["success"].concat(Array.prototype.slice.call(arguments)))},Je.setMax=function(){};var vt={};function pt(e){return"xs"===e.size?" apc-xs":"sm"===e.size?" apc-sm":e.size&&"md"!==e.size?e.size&&"lg"!==e.size?" apc-xl":" apc-lg":" apc-md"}function gt(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=n,e.appendChild(r)}function yt(e,t){if(t)if("function"!=typeof t)t instanceof Promise?t.then((function(t){yt(e,t)})).catch((function(e){})):(Array.isArray(t)&&0!==t.length||(t=["No data"]),gt(e,"Please select...",""),t.map((function(t){gt(e,t.label,t.value)})));else{var n=t();yt(e,n)}}k.getLogger("apice.ui.form");var wt=new WeakMap,mt=new WeakMap,bt=function(){function e(n,r){t(this,e),wt.set(this,{writable:!0,value:void 0}),mt.set(this,{writable:!0,value:void 0}),p(this,wt,document.createElement("div")),v(this,wt).className=n+pt({size:r}),v(this,wt).innerHTML="&nbsp;"}return r(e,[{key:"render",value:function(e){v(this,mt)||(p(this,mt,!0),e.appendChild(v(this,wt)))}}]),e}(),kt=new WeakMap,Et=new WeakMap,Mt=new WeakMap,Wt=function(){function e(n){if(t(this,e),kt.set(this,{writable:!0,value:void 0}),Et.set(this,{writable:!0,value:void 0}),Mt.set(this,{writable:!0,value:void 0}),!n)throw Error("apice.ui.form.button.null_specs");n.id||(n.id="btn_"+z.tinyId()),p(this,kt,n.id),p(this,Et,document.createElement("button")),v(this,Et).id=n.id,v(this,Et).className="apc-button",v(this,Et).innerHTML=n.label,p(this,Mt,!1)}return r(e,[{key:"click",value:function(e){0!==arguments.length?v(this,Et).onclick="function"==typeof e?e:null:v(this,Et).onclick&&v(this,Et).onclick()}},{key:"render",value:function(e){v(this,Mt)||(p(this,Mt,!0),e.appendChild(v(this,Et)))}}]),e}(),_t=new WeakMap,St=new WeakMap,xt=new WeakMap,Lt=function(){function e(){t(this,e),_t.set(this,{writable:!0,value:void 0}),St.set(this,{writable:!0,value:void 0}),xt.set(this,{writable:!0,value:void 0}),p(this,_t,[]),p(this,St,!1),p(this,xt,document.createElement("div")),v(this,xt).className="apc-button-bar"}return r(e,[{key:"addButton",value:function(e){if(e){var t=new Wt(e);return v(this,_t).push(t),v(this,St)&&t.render(),t}}},{key:"render",value:function(e){var t=this;v(this,St)||(p(this,St,!0),v(this,_t).map((function(e){return e.render(v(t,xt))})),e.appendChild(v(this,xt)))}}]),e}(),At=new WeakMap,Tt=new WeakMap,Rt=new WeakMap,Pt=new WeakMap,jt=new WeakMap,Ct=new WeakMap,Nt=new WeakSet,Ot=new WeakSet,Ft=function(){function e(n){var r,i;t(this,e),Ot.add(this),Nt.add(this),At.set(this,{writable:!0,value:void 0}),Tt.set(this,{writable:!0,value:void 0}),Rt.set(this,{writable:!0,value:void 0}),Pt.set(this,{writable:!0,value:void 0}),jt.set(this,{writable:!0,value:void 0}),Ct.set(this,{writable:!0,value:void 0}),n.id||(n.id="field_"+z.tinyId()),n.type||(n.type="input"),p(this,At,n.id),p(this,Tt,n.type),p(this,Rt,n.label),p(this,Pt,document.createElement("div")),v(this,Pt).className=(i="apc-field","input"===(r=n).type?i+=" apc-text":"check"===r.type?i+=" apc-check":"select"===r.type&&(i+=" apc-select"),i+pt(r)),y(this,Ot,It).call(this,n)}return r(e,[{key:"render",value:function(e){v(this,jt)&&v(this,Pt).appendChild(v(this,jt)),y(this,Nt,Ht).call(this),e.appendChild(v(this,Pt))}}]),e}();function Ht(){if(v(this,Rt)){var e=document.createElement("label");e.setAttribute("for",v(this,At)),e.className="apc-label",e.innerHTML=v(this,Rt),v(this,Pt).appendChild(e)}}function It(e){"input"===v(this,Tt)?(p(this,jt,document.createElement("input")),v(this,jt).type="text"):"check"===v(this,Tt)?(p(this,jt,document.createElement("input")),v(this,jt).type="checkbox"):"select"===v(this,Tt)&&(p(this,jt,document.createElement("select")),yt(v(this,jt),e.source))}var Bt=new WeakMap,qt=new WeakMap,Ut=new WeakMap,zt=new WeakMap,Dt=new WeakSet,Gt=function(){function e(n){t(this,e),Dt.add(this),Bt.set(this,{writable:!0,value:void 0}),qt.set(this,{writable:!0,value:void 0}),Ut.set(this,{writable:!0,value:void 0}),zt.set(this,{writable:!0,value:void 0}),p(this,Bt,"form_"+z.tinyId()),p(this,Ut,[]),p(this,qt,!1);var r=document.createElement("div");r.id=v(this,Bt),r.className="apc-form",p(this,zt,r),B(n).append(r)}return r(e,[{key:"addField",value:function(e){if(e){var t=new Ft(e);return y(this,Dt,Xt).call(this,t),t}}},{key:"addSpacer",value:function(e){var t=new bt("apc-spacer",e);y(this,Dt,Xt).call(this,t)}},{key:"addBreak",value:function(){var e=new bt("apc-break");y(this,Dt,Xt).call(this,e)}},{key:"addButtonBar",value:function(){var e=new Lt;return y(this,Dt,Xt).call(this,e),e}},{key:"addButton",value:function(e){if(e){var t=new Wt(e);return y(this,Dt,Xt).call(this,t),t}}},{key:"render",value:function(){var e=this;if(!v(this,qt))return p(this,qt,!0),v(this,Ut).map((function(t){return t.render(v(e,zt))})),this}}]),e}();function Xt(e){e&&(v(this,Ut).push(e),v(this,qt)&&e.render(v(this,zt)))}vt.create=function(e){return new Gt(e)};var $t={toast:Je,form:vt},Jt={};function Vt(){return 1===arguments.length&&!0===arguments[0]?{major:Jt.version.major,minor:Jt.version.minor,patch:Jt.version.patch}:"v"+Jt.version.major+"."+Jt.version.minor+"."+Jt.version.patch}return Jt.version={major:1,minor:0,patch:0},console.log("%Apice Framework "+Vt(),"color: #64dd17;"),{version:Vt,ready:function(e){A.documentReady(e)},logging:k,util:w,events:A,element:B,cookies:b,http:te,controller:ge,fragment:je,router:Oe,error:D,ui:$t}}();
//# sourceMappingURL=apice.min.js.map
